@model E25ProjetEtendu.Models.Order

@{
    ViewData["Title"] = "Terminer la commande";
}

<h1>Détails de la commande #@Model.OrderId</h1>

<p><strong>Date:</strong> @Model.OrderDate.ToString("g")</p>
<p><strong>Client:</strong> @Model.Buyer?.UserName</p>
<p><strong>Lieu de livraison:</strong> @Model.Location</p>
<p><strong>Montant total:</strong> @Model.TotalPrice.ToString("C")</p>
<p><strong>Statut actuel:</strong> @Model.Status.ToString()</p>
<p>    <strong>Articles commandés:</strong></p>
<p></p>
    <ul>
        @foreach (var item in Model.OrderItems)
        {
            <li>@item.Product.Nom - @item.Quantity x @item.Product.Prix.ToString("C")</li>
        }
    </ul>
<hr />

@if (Model.Status == E25ProjetEtendu.Enums.OrderStatus.InProgress)
{
    <form asp-action="TerminateOrder" asp-controller="Order" method="post">
        <input type="hidden" name="orderId" value="@Model.OrderId" />
        <button type="submit" class="btn btn-danger">
            Conclure la livraison
        </button>
    </form>
}
else if(Model.Status == E25ProjetEtendu.Enums.OrderStatus.Delivered)
{
    <div class="alert alert-success">
        La commande est déjà <strong>terminée</strong>.
    </div>
}
else if(Model.Status == E25ProjetEtendu.Enums.OrderStatus.Cancelled)
{
    <div class="alert alert-danger">
        La commande a été <strong>annulée</strong>.
    </div>
}
